(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-repository-repository"],{2316:function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("b85c"));i("b64b"),i("4ec9"),i("d3b7"),i("3ca3"),i("ddb0"),i("14d9"),i("159b"),i("d81d"),i("07ac"),i("e9c4");var o=i("5cfd"),s={data:function(){return{edit:t.baseImg+"/xcx/com/message_center/edit-3.png",delImg:t.baseImg+"/xcx/com/message_center/智能体trash.png",file:t.baseImg+"/xcx/com/message_center/智能体file.png",globe:t.baseImg+"/xcx/com/message_center/智能体globe.png",image:t.baseImg+"/xcx/com/message_center/智能体image.png",userInfo:JSON.parse(uni.getStorageSync("userInfo")),group_id:"",group_order:"",group_name:"",groupList:[],group:[],group_data:[],chatShow:!1,group_index:0,displayLimit:2,groupData:[],groupcolumns:[]}},onLoad:function(t){if(t.obj){console.log(t.obj,555);var e=JSON.parse(t.obj);this.group_id=e[0].group_id,this.group_order=e[0].group_order,this.group_name=e[0].group_name}},onShow:function(){this.getGroups(),this.getGroupsUser()},methods:{version:function(t){console.log(t,"e"),this.group_name=t.value[0],this.chatShow=!1,this.group_index=t.indexs[0],this.getmodels()},getGroups:function(){var t=this;(0,o.agentGroups)(this.userInfo.user_id).then((function(e){if(2e4==e.code){if(t.group_data=e.data.agent,uni.getStorageSync("gro")){var i=uni.getStorageSync("gro"),n=[{group_name:i.name,group_id:i.id,status:1}];console.log(i,n),t.group_data[i.name]=n}t.group[0]=Object.keys(t.group_data),t.groupcolumns=t.group,""==t.group_name&&(t.group_name=t.group_data[t.group[0][0]][0].group_name),t.getmodels()}else t.$api.msg(e.msg)})).catch((function(t){console.log(t)}))},getGroupsUser:function(){var t=this;this.groupData=[];var e={user_id:this.userInfo.user_id};(0,o.groups)(e).then((function(e){if(2e4==e.code){var i,n=new Map;for(var o in n.set("documents","文档库"),n.set("pictures","图片库"),n.set("urls","网址库"),e.data){var s=e.data[o],r=[];for(var u in s){var c,l=s[u],d=[],g=(0,a.default)(l);try{for(g.s();!(c=g.n()).done;){var v=c.value;d.push(v)}}catch(w){g.e(w)}finally{g.f()}var p={name:u,id:l[0].group_id,group_order:l[0].group_order,children:d};r.push(p)}var f={id:(new Date).getTime(),name:n.get(o),children:r};t.groupData.push(f)}if(0==t.current&&uni.getStorageSync("pictures")){var m=uni.getStorageSync("pictures");i={name:m.name,id:m.id,status:1,children:[{group_desc:t.group_desc}]},t.groupData[0].children.push(i)}else if(1==t.current&&uni.getStorageSync("documents")){var h=uni.getStorageSync("documents");i={name:h.name,id:h.id,status:1,children:[{group_desc:t.group_desc}]},t.groupData[1].children.push(i)}else if(2==t.current&&uni.getStorageSync("urls")){var _=uni.getStorageSync("urls");i={name:_.name,id:_.id,status:1,children:[{group_desc:t.group_desc}]},t.groupData[2].children.push(i)}}t.group_desc="",t.group_order=""})).catch((function(e){console.log(e),t.$api.msg("数据请求失败")}))},getmodels:function(){var t=this;this.groupList=[],this.group_id=this.group_data[this.group_name][0].group_id,this.group_order=this.group_data[this.group_name][0].group_order;var e={group_id:this.group_id,group_order:this.group_order,user_id:this.userInfo.user_id};(0,o.models)(e).then((function(e){2e4==e.code?(Object.keys(e.data).forEach((function(i){var n=e.data[i],a=Object.values(n).map((function(t){return t}));t.groupList.push({name:i,values:a})})),console.log(t.groupList,999)):t.$api.msg(e.msg)})).catch((function(t){console.log(t)}))},delAgentAi:function(t){console.log(t,12630);var e=this;uni.showModal({title:"提示",content:"确定删除该项吗？",success:function(i){if(i.confirm){var n={user_id:JSON.parse(uni.getStorageSync("userInfo")).user_id,group_id:t.group_id,agent_id:t.agent_id};(0,o.delAgentModels)(n).then((function(t){2e4===t.code?(e.$api.msg("删除成功"),e.getGroups()):e.$api.msg(t.msg)})).catch((function(t){console.log(t,1015),e.$api.msg("删除失败")}))}}})},toAddAgent:function(t,e){""!=this.groupData[0].children&&""!=this.groupData[1].children&&""!=this.groupData[2].children?1==t?uni.navigateTo({url:"/pages/repository/add_agent?val="+JSON.stringify(e)}):uni.navigateTo({url:"/pages/repository/add_agent"}):uni.showModal({content:"创建AI智能体需要先添加知识库内容，点击确定进行添加",success:function(t){t.confirm&&uni.navigateTo({url:"/pages/repository/group"})}})},toDocument:function(){uni.navigateTo({url:"/pages/repository/document"})},toWebsite:function(){uni.navigateTo({url:"/pages/repository/website"})},toPhoto:function(){uni.navigateTo({url:"/pages/repository/photo"})},toAgent:function(t){uni.navigateTo({url:"/pages/repository/agent?item="+JSON.stringify(t)})},toGroup:function(){uni.setStorageSync("resposNum",3),uni.navigateTo({url:"/pages/repository/group"})},getImgUrl:function(e){return t.baseImg+"/"+e},openMoer:function(t){console.log(t,678),this.displayLimit=t.length},packUp:function(){this.displayLimit=2}}};e.default=s}).call(this,i("c8ba"))},"5ec2":function(t,e,i){"use strict";i.r(e);var n=i("f2ed"),a=i("c0cd");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("cf66");var s=i("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"4e032840",null,!1,n["a"],void 0);e["default"]=r.exports},8700:function(t,e,i){var n=i("925d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("cc0f2ef0",n,!0,{sourceMap:!1,shadowMode:!1})},"925d":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".main[data-v-4e032840]{background-color:#fff;border-radius:%?16?%;padding:%?32?%;margin-bottom:%?32?%}.main .main_title[data-v-4e032840]{margin-bottom:%?34?%}.main .main_title .top[data-v-4e032840]{display:flex;align-items:center}.main .main_title .top .left[data-v-4e032840]{width:3px;height:18px;background:#1f64ff}.main .main_title .top .middle[data-v-4e032840]{color:#393e45;font-size:%?32?%;font-weight:600;margin:0 %?20?% 0 %?16?%}.main .main_title .top uni-image[data-v-4e032840]{width:%?32?%;height:%?32?%}.main .group[data-v-4e032840]{margin-top:%?32?%}.main .group .top[data-v-4e032840]{display:flex;justify-content:space-between;margin-bottom:%?24?%}.tag[data-v-4e032840]{color:#1f64ff;font-size:%?26?%;font-weight:400}.txt[data-v-4e032840]{color:#202123;font-size:%?28?%;font-weight:500}.card[data-v-4e032840]{margin-bottom:%?20?%;padding:%?32?% %?32?% %?44?% %?32?%;display:flex;border-radius:%?20?%;background:#f5f5f5}.card .avatar[data-v-4e032840]{width:%?108?%;height:%?108?%;border-radius:50%}.card .right[data-v-4e032840]{margin-left:%?32?%;width:100%}.card .right_top[data-v-4e032840]{display:flex;justify-content:space-between}.card .right_top .icon[data-v-4e032840]{display:flex;justify-content:space-between;width:20%}.card .right_top .icon .icon_l[data-v-4e032840]{width:%?32?%;height:%?32?%}.cont[data-v-4e032840]{color:#2c2c2e;font-size:%?24?%;font-weight:400;width:75%;margin-top:%?8?%}.unfold[data-v-4e032840]{color:#1f64ff;font-size:%?24?%;font-weight:400;display:flex;justify-content:center}.bank[data-v-4e032840]{padding:%?37?% %?32?%;display:flex;justify-content:space-between;border-radius:%?16?%;background:#e5edff;margin-bottom:%?20?%;align-items:center}.bank .left_t[data-v-4e032840]{color:#333;font-size:%?30?%;font-weight:500}.bank .left_b[data-v-4e032840]{color:#666;font-size:%?26?%;font-weight:400;margin-top:%?8?%}.bankIcon[data-v-4e032840]{width:%?64?%;height:%?64?%}",""]),t.exports=e},b85c:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=(0,n.default)(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,u=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return r=t.done,t},e:function(t){u=!0,s=t},f:function(){try{r||null==i["return"]||i["return"]()}finally{if(u)throw s}}}},i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("d9e2"),i("d401");var n=function(t){return t&&t.__esModule?t:{default:t}}(i("06c5"))},c0cd:function(t,e,i){"use strict";i.r(e);var n=i("2316"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},cf66:function(t,e,i){"use strict";var n=i("8700"),a=i.n(n);a.a},f2ed:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uIcon:i("e838").default,uPicker:i("0343").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{padding:"32upx"}},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"main_title"},[i("v-uni-view",{staticClass:"top"},[i("v-uni-view",{staticClass:"left"}),i("v-uni-view",{staticClass:"middle"},[t._v("AI智能体")])],1),i("v-uni-view",{staticStyle:{color:"#B7B9C0","font-size":"24upx","margin-top":"8rpx"}},[t._v("点击AI智能体开启对话，帮助您工作学习提高效率")])],1),i("v-uni-view",{staticClass:"group"},[i("v-uni-view",{staticClass:"card",staticStyle:{"align-items":"center"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAddAgent.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{width:"30%"}},[i("v-uni-view",{staticClass:"avatar",staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"#fff"}},[i("u-icon",{attrs:{name:"plus",size:"21"}})],1)],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"txt"},[t._v("创建AI智能体")])],1)],1)],1),i("v-uni-view",{staticClass:"top",staticStyle:{display:"flex","justify-content":"space-between"}},[i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-view",{staticClass:"txt",staticStyle:{"margin-right":"15rpx"}},[t._v(t._s(t.group_name))]),i("u-icon",{attrs:{name:"arrow-down",color:"#000",size:"18"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chatShow=!0}}})],1),i("v-uni-view",{staticClass:"tag",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toGroup.apply(void 0,arguments)}}},[t._v("分组管理")])],1),i("v-uni-view",t._l(t.groupList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"group"},[i("v-uni-view",{staticClass:"top"},[i("v-uni-view",{staticClass:"txt"},[t._v(t._s(e.name))])],1),t._l(e.values,(function(e,n){return n<t.displayLimit?i("v-uni-view",{key:n,staticClass:"card"},[i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toAgent(e)}}},[i("v-uni-image",{staticClass:"avatar",attrs:{src:t.getImgUrl(e.avatar_url)}})],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"right_top"},[i("v-uni-view",{staticClass:"txt",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toAgent(e)}}},[t._v(t._s(e.agent_name))]),i("v-uni-view",{staticClass:"icon"},[i("v-uni-image",{staticClass:"icon_l",attrs:{src:t.edit},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toAddAgent(1,e)}}}),i("v-uni-image",{staticClass:"icon_l",attrs:{src:t.delImg},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.delAgentAi(e)}}})],1)],1),i("v-uni-view",{staticClass:"cont"},[t._v(t._s(e.agent_desc))])],1)],1):t._e()})),t.displayLimit<3&&t.groupList[n].values.length>2?i("v-uni-view",{staticClass:"unfold",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openMoer(t.groupList[n].values)}}},[t._v("展开更多"),i("u-icon",{attrs:{name:"arrow-down",color:"#1F64FF",size:"20"}})],1):t._e(),t.displayLimit>2?i("v-uni-view",{staticClass:"unfold",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.packUp.apply(void 0,arguments)}}},[t._v("收起"),i("u-icon",{attrs:{name:"arrow-up",color:"#1F64FF",size:"20"}})],1):t._e()],2)})),1),""==t.groupList?i("v-uni-view",{staticStyle:{width:"100%","text-align":"center",color:"#999","font-size":"28rpx"}},[t._v("暂无数据")]):t._e()],1),i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"main_title"},[i("v-uni-view",{staticClass:"top",staticStyle:{"justify-content":"space-between"}},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[i("v-uni-view",{staticClass:"left"}),i("v-uni-view",{staticClass:"middle"},[t._v("知识库")])],1),i("v-uni-view",{staticStyle:{color:"#B7B9C0","font-size":"24upx","margin-top":"8rpx"}},[t._v("API文档")])],1),i("v-uni-view",{staticStyle:{color:"#B7B9C0","font-size":"24upx","margin-top":"8rpx"}},[t._v("知识库内容会被AI智能体应用，并用于回答问题")])],1),i("v-uni-view",{staticClass:"bank",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPhoto.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticClass:"left_t"},[t._v("图片库")]),i("v-uni-view",{staticClass:"left_b"},[t._v("上传图片，编辑图片标签")])],1),i("v-uni-image",{staticClass:"bankIcon",attrs:{src:t.image}})],1),i("v-uni-view",{staticClass:"bank",staticStyle:{background:"rgba(0, 199, 119, 0.10)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDocument.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticClass:"left_t"},[t._v("文档库")]),i("v-uni-view",{staticClass:"left_b"},[t._v("上传docx、pdf、xlsx、ppt、txt、md文件")])],1),i("v-uni-image",{staticClass:"bankIcon",attrs:{src:t.file}})],1),i("v-uni-view",{staticClass:"bank",staticStyle:{background:"#FFF9E6"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toWebsite.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-view",{staticClass:"left_t"},[t._v("网址库")]),i("v-uni-view",{staticClass:"left_b"},[t._v("导入网站网址")])],1),i("v-uni-image",{staticClass:"bankIcon",attrs:{src:t.globe}})],1)],1),i("u-picker",{attrs:{show:t.chatShow,columns:t.groupcolumns,closeOnClickOverlay:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.chatShow=!1},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.chatShow=!1},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.version.apply(void 0,arguments)}},model:{value:t.group_name,callback:function(e){t.group_name=e},expression:"group_name"}})],1)},o=[]}}]);