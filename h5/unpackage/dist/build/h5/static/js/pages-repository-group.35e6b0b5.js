(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-repository-group"],{"01fb":function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uTabs:i("a8e3").default,uPopup:i("77c5").default},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{background:"#f6f8fb","min-height":"100vh"}},[i("u-tabs",{attrs:{list:t.list,lineWidth:"50",lineHeight:"2",lineColor:"#1f64ff",activeStyle:{color:"#1F64FF","font-size":"30rpx"},current:t.current,inactiveStyle:{"font-size":"30rpx"}},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.tabsChange.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"main"},[3!=t.current?i("v-uni-view",t._l(t.groupList[t.current].children,(function(e,n){return t.groupList[t.current]?i("v-uni-view",{key:n,staticClass:"group"},[i("v-uni-view",{staticClass:"group_l",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toPage(t.current,e)}}},[i("v-uni-view",{staticClass:"l_txt"},[t._v(t._s(e.name))])],1),i("v-uni-view",{staticClass:"group_r"},[i("v-uni-view",{staticClass:"icons",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.editGroup(e)}}},[i("v-uni-image",{staticClass:"icon_l",attrs:{src:t.edit}}),i("v-uni-view",{staticClass:"title"},[t._v("编辑")])],1),i("v-uni-view",{staticClass:"icons",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.delGroup(e)}}},[i("v-uni-image",{staticClass:"icon_l",attrs:{src:t.delImg}}),i("v-uni-view",{staticClass:"title"},[t._v("删除")])],1)],1)],1):t._e()})),1):t._e(),t._l(t.group,(function(e,n){return 3==t.current&&t.group?i("v-uni-view",{key:n,staticClass:"group"},[i("v-uni-view",{staticClass:"group_l",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toPage(t.current,e)}}},[i("v-uni-view",{staticClass:"l_txt"},[t._v(t._s(e[0].group_name))])],1),i("v-uni-view",{staticClass:"group_r"},[i("v-uni-view",{staticClass:"icons",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.editGroup(e)}}},[i("v-uni-image",{staticClass:"icon_l",attrs:{src:t.edit}}),i("v-uni-view",{staticClass:"title"},[t._v("编辑")])],1),i("v-uni-view",{staticClass:"icons",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.delGroup(e)}}},[i("v-uni-image",{staticClass:"icon_l",attrs:{src:t.delImg}}),i("v-uni-view",{staticClass:"title"},[t._v("删除")])],1)],1)],1):t._e()}))],2),i("v-uni-view",{staticClass:"add",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showing=!0}}},[i("v-uni-image",{attrs:{src:t.addGroup}})],1),i("u-popup",{attrs:{show:t.showing,mode:"center"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{padding:"60rpx 40rpx"}},[i("v-uni-view",{staticStyle:{display:"flex","margin-bottom":"50rpx"}},[i("v-uni-view",{staticClass:"name"},[t._v("分组名称：")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请输入分组名称"},model:{value:t.group_name,callback:function(e){t.group_name=e},expression:"group_name"}})],1),i("v-uni-view",{staticStyle:{display:"flex","margin-bottom":"20rpx"}},[i("v-uni-view",{staticClass:"name "},[t._v("描述：")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请输入描述"},model:{value:t.group_desc,callback:function(e){t.group_desc=e},expression:"group_desc"}})],1),i("v-uni-view",{staticClass:"li_edit",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showing=!1}}},[i("v-uni-view",{staticClass:"edit_l"},[t._v("取消")]),i("v-uni-view",{staticClass:"edit_r",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)],1)],1)},s=[]},"0b74":function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i("b85c"));i("d3b7"),i("07ac"),i("4ec9"),i("3ca3"),i("ddb0"),i("14d9"),i("e9c4"),i("b64b");var s=i("5cfd"),o={data:function(){return{current:0,list:[{name:"图片库"},{name:"文档库"},{name:"网址库"},{name:"智能体"}],edit:t.baseImg+"/xcx/com/message_center/edit-3.png",delImg:t.baseImg+"/xcx/com/message_center/智能体trash.png",addGroup:t.baseImg+"/xcx/com/message_center/新建分组.png",showing:!1,group_name:"",group_desc:"",group_order:1,group_id:"",documents:{},pictures:{},urls:{},gro:{},userInfo:JSON.parse(uni.getStorageSync("userInfo")),groupList:[],isEdit:0,status:0,group:[]}},onShow:function(){this.getGroups(),this.getGroupsznt(),3==uni.getStorageSync("resposNum")?this.current=3:0==uni.getStorageSync("resposNum")?this.current=0:1==uni.getStorageSync("resposNum")?this.current=1:2==uni.getStorageSync("resposNum")&&(this.current=2),uni.setStorageSync("resposNum","")},methods:{addChange:function(){this.show=!0},tabsChange:function(t){this.current=t.index,console.log(this.current,1113),3==this.current?this.getGroupsznt():this.getGroups()},getGroupsznt:function(){var t=this;this.group=[],(0,s.agentGroups)(this.userInfo.user_id).then((function(e){if(2e4==e.code){if(t.group=e.data.agent,console.log(t.group,777),3==t.current&&uni.getStorageSync("gro")){var i=uni.getStorageSync("gro"),n=(Object.values(t.group).every((function(t){return t[0].id===i.id})),[{group_name:i.name,group_id:i.id,status:1,group_desc:t.group_desc}]);console.log(i,n,1050),t.group[i.name]=n,console.log(t.group,i.name,1713)}t.group_desc="",t.group_name="",t.group_order=""}else t.$api.msg(e.msg)})).catch((function(t){console.log(t)}))},submit:function(){var t=this;if(1==this.isEdit){var e;if(e={user_id:JSON.parse(uni.getStorageSync("userInfo")).user_id,group_id:this.group_id,group_name:this.group_name,group_desc:this.group_desc},0==this.current&&1!=this.status)(0,s.putPictures)(e).then((function(e){2e4==e.code?t.$api.msg("修改成功"):t.$api.msg(e.msg)}));else if(1==this.current&&1!=this.status)(0,s.putDocuments)(e).then((function(e){2e4==e.code?t.$api.msg("修改成功"):t.$api.msg(e.msg)}));else if(2==this.current&&1!=this.status)(0,s.putWebsites)(e).then((function(e){2e4==e.code?t.$api.msg("修改成功"):t.$api.msg(e.msg)}));else if(3==this.current){var i={group_desc:this.group_desc,user_id:JSON.parse(uni.getStorageSync("userInfo")).user_id,group_id:this.group_id,group_name:this.group_name};console.log(i,126),(0,s.editAgent)(i).then((function(e){2e4==e.code?(t.$api.msg("修改成功"),t.getGroupsznt()):t.$api.msg(e.msg)})).catch()}else{var n={name:this.group_id,id:this.group_name,status:1,children:[{group_desc:this.group_desc}]};0==this.current?uni.setStorageSync("pictures",n):1==this.current?uni.setStorageSync("documents",n):2==this.current?uni.setStorageSync("urls",n):3==this.current&&uni.setStorageSync("gro",n)}this.isEdit=0,this.getGroups()}else 0==this.current?(this.pictures={name:this.group_name,id:(new Date).getTime()},uni.setStorageSync("pictures",this.pictures),this.getGroups()):1==this.current?(this.documents={name:this.group_name,id:(new Date).getTime()},uni.setStorageSync("documents",this.documents),this.getGroups()):2==this.current?(this.urls={name:this.group_name,id:(new Date).getTime()},uni.setStorageSync("urls",this.urls),this.getGroups()):3==this.current&&(this.gro={name:this.group_name,id:(new Date).getTime()},uni.setStorageSync("gro",this.gro),this.getGroupsznt()),console.log(this.pictures,this.documents,this.urls,this.gro,936),uni.showModal({content:"添加成功，请点击分组添加内容，否则下次新建分组时将替换此前无内容的分组！"});this.showing=!1,this.$forceUpdate()},getGroups:function(){var t=this,e={user_id:this.userInfo.user_id};(0,s.groups)(e).then((function(e){if(2e4==e.code){var i,n=new Map;for(var s in n.set("documents","文档库"),n.set("pictures","图片库"),n.set("urls","网址库"),t.groupList=[],e.data){var o=e.data[s],u=[];for(var a in o){var c,d=o[a],g=[],p=(0,r.default)(d);try{for(p.s();!(c=p.n()).done;){var l=c.value;g.push(l)}}catch(b){p.e(b)}finally{p.f()}var f={name:a,id:d[0].group_id,group_order:d[0].group_order,children:g};u.push(f)}var h={id:(new Date).getTime(),name:n.get(s),children:u};t.groupList.push(h)}if(console.log(t.groupList,1015),0==t.current&&uni.getStorageSync("pictures")){var v=uni.getStorageSync("pictures"),m=t.groupList[0].children.every((function(t){return t.id===v.id}));m&&""!=t.groupList[0].children||(i={name:v.name,id:v.id,status:1,children:[{group_desc:t.group_desc}],group_order:1},t.groupList[0].children.push(i))}else if(1==t.current&&uni.getStorageSync("documents")){var _=uni.getStorageSync("documents"),y=t.groupList[1].children.every((function(t){return t.id===_.id}));y&&""!=t.groupList[1].children||(i={name:_.name,id:_.id,status:1,children:[{group_desc:t.group_desc}],group_order:1},t.groupList[1].children.push(i))}else if(2==t.current&&uni.getStorageSync("urls")){var S=uni.getStorageSync("urls"),w=t.groupList[2].children.every((function(t){return t.id===S.id}));w&&""!=t.groupList[2].children||(i={name:S.name,id:S.id,status:1,children:[{group_desc:t.group_desc}],group_order:1},t.groupList[2].children.push(i))}}t.group_desc="",t.group_name="",t.group_order=""})).catch((function(e){console.log(e),t.$api.msg("数据请求失败")}))},toPage:function(t,e){0==t?uni.navigateTo({url:"/pages/repository/photo?obj="+JSON.stringify(e)}):1==t?uni.navigateTo({url:"/pages/repository/document?obj="+JSON.stringify(e)}):2==t?uni.navigateTo({url:"/pages/repository/website?obj="+JSON.stringify(e)}):3==t&&uni.switchTab({url:"/pages/repository/repository?obj="+JSON.stringify(e)})},editGroup:function(t){console.log(t,"edit"),this.isEdit=1,this.showing=!0,3==this.current?(this.group_id=t[0].group_id,this.group_name=t[0].name,this.group_desc=t[0].group_desc):(this.group_name=t.name,this.group_desc=t.children[0].group_desc,"None"==this.group_desc&&(this.group_desc=""),this.group_id=t.id,this.status=t.status)},delGroup:function(t){console.log(t,"del");var e=this;uni.showModal({title:"提示",content:"确定删除该项吗？",success:function(i){if(i.confirm){var n={user_id:JSON.parse(uni.getStorageSync("userInfo")).user_id,group_id:t.id};if(0==e.current&&1!=t.status)(0,s.delPictures)(n).then((function(t){2e4===t.code?(e.$api.msg("删除成功"),e.getGroups()):e.$api.msg(t.msg)})).catch((function(t){e.$api.msg("删除失败")}));else if(1==e.current&&1!=t.status)(0,s.delDocuments)(n).then((function(t){2e4===t.code?(e.$api.msg("删除成功"),e.getGroups()):e.$api.msg(t.msg)})).catch((function(t){e.$api.msg("删除失败")}));else if(2==e.current&&1!=t.status)(0,s.delWebsites)(n).then((function(t){2e4===t.code?(e.$api.msg("删除成功"),e.getGroups()):e.$api.msg(t.msg)})).catch((function(t){e.$api.msg("删除失败")}));else if(3==e.current&&1!=t[0].status){var r={user_id:JSON.parse(uni.getStorageSync("userInfo")).user_id,group_id:t[0].group_id};(0,s.delAgentModels)(r).then((function(t){2e4===t.code?(e.$api.msg("删除成功"),e.getGroups()):e.$api.msg(t.msg)})).catch((function(t){e.$api.msg("删除失败")}))}else{if(0==e.current)console.log(11111),e.groupList[0].children.pop(),uni.setStorageSync("pictures","");else if(1==e.current)e.groupList[1].children.pop(),uni.setStorageSync("documents","");else if(2==e.current)e.groupList[2].children.pop(),uni.setStorageSync("urls","");else if(3==e.current){var o=Object.keys(e.group),u=o[o.length-1];delete e.group[u],uni.setStorageSync("pro",""),e.getGroupsznt()}e.$api.msg("删除成功")}}e.isEdit=0}})},close:function(){this.showing=!1,this.isEdit=0}}};e.default=o}).call(this,i("c8ba"))},"1eca":function(t,e,i){var n=i("6786");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=i("4f06").default;r("1d1982c6",n,!0,{sourceMap:!1,shadowMode:!1})},"39ff":function(t,e,i){"use strict";i.r(e);var n=i("0b74"),r=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=r.a},6786:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".main[data-v-0a77dc7c]{padding:%?32?%}.group[data-v-0a77dc7c]{border-radius:%?8?%;background:#fff;padding:%?40?% %?32?%;display:flex;justify-content:space-between;margin-bottom:%?24?%}.group_l[data-v-0a77dc7c]{width:66%}.group_l .l_txt[data-v-0a77dc7c]{color:#3d3d3d;font-size:%?28?%;font-weight:500}.group_l .l_cont[data-v-0a77dc7c]{color:#3d3d3d;font-size:%?26?%;font-weight:400;margin-top:%?16?%}.group_r[data-v-0a77dc7c]{display:flex}.group_r .icons[data-v-0a77dc7c]{margin-left:%?48?%}.group_r .icons .icon_l[data-v-0a77dc7c]{width:%?40?%;height:%?40?%}.group_r .icons .title[data-v-0a77dc7c]{color:#3f3f3f;font-size:%?22?%;font-weight:400}.add[data-v-0a77dc7c]{position:fixed;right:%?32?%;bottom:%?80?%;z-index:9999}.add uni-image[data-v-0a77dc7c]{width:%?120?%;height:%?120?%}.li_edit[data-v-0a77dc7c]{display:flex;align-items:center;justify-content:space-between;width:83%;padding:%?0?% %?32?%;margin-top:%?70?%}.li_edit .edit_l[data-v-0a77dc7c]{padding:%?18?% %?30?%;border-radius:%?12?%;border:%?1?% solid #1f64ff;color:#1f64ff;text-align:center;font-size:%?28?%;font-style:normal;font-weight:600;margin-right:%?20?%;width:42%}.edit_r[data-v-0a77dc7c]{padding:%?20?% %?30?%;border-radius:%?12?%;background:#1f64ff;color:#fff;text-align:center;font-size:%?28?%;font-style:normal;font-weight:600;width:42%}.name[data-v-0a77dc7c]{width:34%;font-size:%?30?%}[data-v-0a77dc7c] .u-popup{z-index:9999}",""]),t.exports=e},"747c":function(t,e,i){"use strict";i.r(e);var n=i("01fb"),r=i("39ff");for(var s in r)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return r[t]}))}(s);i("b638");var o=i("f0c5"),u=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"0a77dc7c",null,!1,n["a"],void 0);e["default"]=u.exports},b638:function(t,e,i){"use strict";var n=i("1eca"),r=i.n(n);r.a},b85c:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=(0,n.default)(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var r=0,s=function(){};return{s:s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return u=t.done,t},e:function(t){a=!0,o=t},f:function(){try{u||null==i["return"]||i["return"]()}finally{if(a)throw o}}}},i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("d9e2"),i("d401");var n=function(t){return t&&t.__esModule?t:{default:t}}(i("06c5"))}}]);