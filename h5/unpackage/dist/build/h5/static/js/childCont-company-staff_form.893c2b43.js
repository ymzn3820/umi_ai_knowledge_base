(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["childCont-company-staff_form"],{"02dd":function(t,e,a){"use strict";(function(t){a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("14d9"),a("d3b7"),a("159b");var i=a("be8a"),n={data:function(){return{staff_name:"",logoImg:[],welcomMessage:"",roleShow:!1,roleIndex:0,roleValue:0,roleList:[],company_code:"",clerk_code:"",isClick:!0,delImg:t.baseImg+"/xcx/853ff4b9-283a-4917-b922-f2329cbcb562.jpg"}},components:{},onLoad:function(t){if(t.company_code&&(this.company_code=t.company_code),t.item){var e=JSON.parse(t.item);if(this.staff_name=e.clerk_name,this.welcomMessage=e.welcome_msg,this.roleIndex=e.knowledge_code,this.clerk_code=e.clerk_code,this.company_code=e.company_code,""!=e.icon_url){var a={file_url:e.icon_url};this.logoImg=[],this.logoImg.push(a)}}},onShow:function(){this.getKnowList()},methods:{getKnowList:function(){var t=this,e={company_code:this.company_code};(0,i.getKnowList)(e).then((function(e){2e4==e.code?(t.roleList=[],t.roleList.push(e.data.data),0!=t.roleIndex?e.data.data.forEach((function(e,a){e.knowledge_code==t.roleIndex&&(t.roleValue=e.title)})):(t.roleIndex=e.data.data[0].knowledge_code,t.roleValue=e.data.data[0].title)):t.$api.msg(e.msg)})).catch((function(e){t.$api.msg("获取对话信息失败")}))},addStaff:function(){var t=this;if(""!=this.staff_name)if(0!=this.logoImg.length)if(""!=this.welcomMessage){var e="";if(this.logoImg.length>0&&(e=this.logoImg[0].file_url),0!=this.isClick)if(this.isClick=!1,""!=this.clerk_code){var a={clerk_code:this.clerk_code,clerk_name:this.staff_name,icon_url:e,welcome_msg:this.welcomMessage};(0,i.editClerk)(a).then((function(e){2e4==e.code?(t.$api.msg("修改成功"),setTimeout((function(){uni.redirectTo({url:"/childCont/company/know_list?company_code="+t.company_code+"&active=1"})}),1500),t.isClick=!0):(t.$api.msg(e.msg),t.isClick=!0)})).catch((function(e){t.$api.msg("修改失败"),t.isClick=!0}))}else{var n={company_code:this.company_code,knowledge_code:this.roleIndex,clerk_name:this.staff_name,icon_url:e,welcome_msg:this.welcomMessage};(0,i.addClerk)(n).then((function(e){2e4==e.code?(t.$api.msg("添加成功"),setTimeout((function(){uni.switchTab({url:"/pages/index/index?company_code="+t.company_code+"&active=1"})}),1500),t.isClick=!0):(t.$api.msg(e.msg),t.isClick=!0)})).catch((function(e){t.$api.msg("添加失败"),t.isClick=!0}))}}else this.$api.msg("欢迎语不能为空");else this.$api.msg("请上传团队图标");else this.$api.msg("名称不能为空")},uploadImg:function(e,a){var i=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){console.log(e,589);var a=e.tempFilePaths[0],n=e.tempFiles[0].size;n>5242880?i.$api.msg("该文件已超过5M，不能上传"):uni.uploadFile({url:t.loginUrl+"/api/user/oss_upload",filePath:a,name:"image",formData:{image:a,oss_dir:"static",cate:"create_character"},success:function(t){var e=JSON.parse(t.data);if(console.log(e,333),2e4==e.code){var a=e.data.new_url,n={file_url:a};i.logoImg.push(n)}else i.$api.msg(e.msg)}})}})},openRole:function(){this.roleShow=!0},roleSubmit:function(t){console.log(t,1456),this.roleIndex=t.value[0].knowledge_code,this.roleValue=t.value[0].title,this.roleShow=!1},getImgUrl:function(e){return t.baseImg+"/"+e}}};e.default=n}).call(this,a("c8ba"))},"2a16":function(t,e,a){"use strict";a.r(e);var i=a("02dd"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},4691:function(t,e,a){"use strict";a.r(e);var i=a("53d3"),n=a("2a16");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("cd25");var c=a("f0c5"),s=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"cf780572",null,!1,i["a"],void 0);e["default"]=s.exports},"53d3":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={"u-Input":a("835d").default,uTextarea:a("781d").default,uIcon:a("e838").default,uPicker:a("0343").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"cont"},[i("v-uni-view",{staticClass:"chat_text"},[i("v-uni-view",{staticClass:"text_cont"},[i("v-uni-text",{staticClass:"text_l"},[t._v("*")]),i("v-uni-text",{staticClass:"text_r"},[t._v("名称")])],1),i("u--input",{attrs:{placeholder:"请输入企业AI数字员工名称(20字内）",border:"surround",maxlength:"20"},model:{value:t.staff_name,callback:function(e){t.staff_name=e},expression:"staff_name"}})],1),i("v-uni-view",{staticClass:"chat_text"},[i("v-uni-view",{staticClass:"text_cont"},[i("v-uni-text",{staticClass:"text_l"},[t._v("*")]),i("v-uni-text",{staticClass:"text_r"},[t._v("团队图标")])],1),i("v-uni-view",{staticClass:"qs_img"},[t._l(t.logoImg,(function(e,a){return i("v-uni-view",{key:a,staticStyle:{position:"relative"}},[i("img",{staticClass:"up_img",attrs:{src:t.getImgUrl(e.file_url),alt:""}}),i("img",{staticClass:"del_img",attrs:{src:t.delImg,alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logoImg.splice(a,1)}}})])})),0==t.logoImg.length?i("img",{staticClass:"up_img",attrs:{src:a("5baf"),mode:"aspectFit"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadImg()}}}):t._e()],2),i("v-uni-view",{staticClass:"img_text"},[t._v("请上传jpg/png文件，文件大小不超过5MB，尽量为正方形")])],1),i("v-uni-view",{staticClass:"chat_text"},[i("v-uni-view",{staticClass:"text_cont"},[i("v-uni-text",{staticClass:"text_l"},[t._v("*")]),i("v-uni-text",{staticClass:"text_r"},[t._v("欢迎语设置")])],1),i("u-textarea",{attrs:{placeholder:"请输入欢迎语",maxlength:"100"},model:{value:t.welcomMessage,callback:function(e){t.welcomMessage=e},expression:"welcomMessage"}})],1),i("v-uni-view",{staticClass:"chat_text"},[i("v-uni-view",{staticClass:"text_cont"},[i("v-uni-text",{staticClass:"text_l"},[t._v("*")]),i("v-uni-text",{staticClass:"text_r"},[t._v("绑定知识库")])],1),""==t.clerk_code?i("v-uni-view",{staticClass:"lists",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openRole.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"txt"},[t._v(t._s(t.roleValue))]),i("u-icon",{attrs:{name:"arrow-down",color:"#666",size:"16"}})],1):i("v-uni-view",[i("u--input",{attrs:{border:"surround",disabled:!0},model:{value:t.roleValue,callback:function(e){t.roleValue=e},expression:"roleValue"}})],1)],1)],1)],1),i("u-picker",{attrs:{show:t.roleShow,columns:t.roleList,keyName:"title"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.roleShow=!1},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.roleSubmit.apply(void 0,arguments)}},model:{value:t.roleIndex,callback:function(e){t.roleIndex=e},expression:"roleIndex"}}),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticClass:"bottom_cont"},[i("v-uni-view",{staticClass:"bottom_buy",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addStaff.apply(void 0,arguments)}}},[t._v("保存")])],1)],1)],1)},o=[]},"68eee":function(t,e,a){var i=a("a23b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("0bbef277",i,!0,{sourceMap:!1,shadowMode:!1})},a23b:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-cf780572]{background:#f6f8fb}body.?%PAGE?%[data-v-cf780572]{background:#f6f8fb}.container[data-v-cf780572]{padding:%?30?%}.container .cont[data-v-cf780572]{background:#fff;border-radius:%?10?%;padding:%?20?%}.container .chat_text[data-v-cf780572]{width:100%;padding:%?20?% 0}.container .chat_text[data-v-cf780572] .u-textarea{padding:%?18?%;min-height:%?100?%;max-height:%?150?%;overflow-y:auto}.container .chat_text .text_cont[data-v-cf780572]{display:flex;align-items:center;margin-bottom:%?10?%;width:100%}.container .chat_text .text_cont .text_l[data-v-cf780572]{color:#ff0101;font-size:%?22?%;font-style:normal;font-weight:400;line-height:%?26?%;margin-right:%?5?%}.container .chat_text .text_tip[data-v-cf780572]{color:#b7b9c0;font-size:%?24?%;font-style:normal;font-weight:400;line-height:150%}.container .chat_text .text_conts[data-v-cf780572]{display:flex;align-items:center;justify-content:space-between;margin-bottom:%?10?%;width:100%}.container .chat_text .text_conts .text_u[data-v-cf780572]{display:flex;align-items:center}.container .chat_text .text_conts .text_u .u_li[data-v-cf780572]{color:#9a9a9a;text-align:center;font-size:%?22?%;font-style:normal;font-weight:400;margin-right:%?10?%}.container .chat_text .text_conts .text_u .add_img[data-v-cf780572]{width:%?28?%;height:%?28?%}.container .chat_text .text_conts .text_u .add_li[data-v-cf780572]{color:#1f64ff;font-size:%?26?%;font-style:normal;font-weight:400;line-height:150%;padding-left:%?10?%}.container .chat_text .text_r[data-v-cf780572]{color:#333;text-align:center;font-size:%?24?%;font-style:normal;font-weight:530;line-height:%?26?%}.container .chat_text .right_img[data-v-cf780572]{width:%?24?%;height:%?24?%;margin-right:%?25?%}.container .chat_text .lists[data-v-cf780572]{display:flex;flex-direction:row;align-items:center;padding:%?20?%;background:#fff;border-radius:%?8?%;border:.5px solid #dadbde}.container .chat_text .lists .txt[data-v-cf780572]{font-size:%?26?%;margin-left:%?20?%;flex:1}.bottom[data-v-cf780572]{width:100%;position:fixed;bottom:%?0?%;background:#fff;padding:%?20?% 0}.bottom .bottom_cont[data-v-cf780572]{width:100%;display:flex;justify-content:center;flex-direction:column}.bottom .bottom_buy[data-v-cf780572]{width:80%;height:%?80?%;background:#1f64ff;border-radius:6px;font-family:PingFang SC;font-style:normal;font-weight:500;font-size:14px;line-height:20px;color:#fff;display:flex;justify-content:center;align-items:center;margin:auto}.bottom .bottom_buy[data-v-cf780572]:active{opacity:.6}.qs_img[data-v-cf780572]{display:flex;align-items:center;justify-content:flex-start;flex-wrap:wrap}.qs_img .up_img[data-v-cf780572]{width:%?120?%;height:%?120?%;padding:%?10?%;margin:0 %?5?%}.qs_img .del_img[data-v-cf780572]{position:absolute;top:0;right:%?10?%;width:%?36?%;height:%?36?%}.img_text[data-v-cf780572]{color:#9a9a9a;font-size:%?24?%;font-style:normal;font-weight:400}",""]),t.exports=e},cd25:function(t,e,a){"use strict";var i=a("68eee"),n=a.n(i);n.a}}]);